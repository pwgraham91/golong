{% extends 'base.html' %}
{% block title %}
    View {{ route.trip_name }}
{% endblock title %}
{% block script %}
    <script src="http://maps.google.com/maps/api/js?sensor=false"
          type="text/javascript">
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0MF0g9tLlzezN6L6B5EVlm8WsThRAVZQ"
          </script>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>


{% endblock script %}
{% block content %}
<h1>Trip Name: {{ route.trip_name }}</h1>
<h2>Trip Driver: {{ route.trip_driver }}</h2>
<h2>Starting Trip In: {{ route.start_city_state }}</h2>
<h2>Ending Trip In: {{ route.end_city_state }}</h2>
<h2>Car: <a href="{% url "view_car" route.trip_car.id %}"> {{ route.trip_car }}</a></h2>
{% for passenger in route.passenger.all %}
    <h2>Taking <a href="{% url "view_traveler" passenger.id %}"> {{ passenger }}</a> along!</h2>
    {% endfor %}
   <div style="width: 600px;">
     <div id="map" style="width: 280px; height: 400px; float: left;"></div>
     <div id="panel" style="width: 300px; float: right;"></div>
   </div>

   <script type="text/javascript">

     var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();

     var map = new google.maps.Map(document.getElementById('map'), {
       zoom:3,
       mapTypeId: google.maps.MapTypeId.ROADMAP
     });

     directionsDisplay.setMap(map);
{#     directionsDisplay.setPanel(document.getElementById('panel'));#}

     var request = {
       origin: '{{ route.start_city_state }}',
       destination: '{{ route.end_city_state }}',
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       }
     });
   </script>
{#        <div id="map" style="width: 500px; height: 400px;">#}
{##}
{#  <script type="text/javascript">#}
{##}
{#    var map = new google.maps.Map(document.getElementById('map'), {#}
{#      zoom: 6,#}
{#      center: new google.maps.LatLng({{ route.start_latitude }}, {{ route.start_longitude }}),#}
{#      mapTypeId: google.maps.MapTypeId.ROADMAP#}
{#    });#}
{##}
{#    var infowindow = new google.maps.InfoWindow();#}
{##}
{#    var marker, i;#}
{##}
{#    for (i = 0; i < locations.length; i++) {#}
{#      marker = new google.maps.Marker({#}
{#        position: new google.maps.LatLng(locations[i][1], locations[i][2]),#}
{#        map: map#}
{#      });#}
{##}
{#      google.maps.event.addListener(marker, 'click', (function(marker, i) {#}
{#        return function() {#}
{#          infowindow.setContent(locations[i][0]);#}
{#          infowindow.open(map, marker);#}
{#        }#}
{#      })(marker, i));#}
{#    }#}
{#  </script></div>#}
{% if route.trip_driver == viewer %}
<a href=" {% url "edit_route" route.id %} ">Edit {{ route.trip_name }}</a>
<a href=" {% url "delete_route" route.id %} ">Delete {{ route.trip_name }}</a>
{% endif %}
{% endblock content %}